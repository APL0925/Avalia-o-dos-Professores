<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avalia√ß√£o de Professores</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #comments { margin-top: 20px; }
        .comment-box { border: 1px solid #ccc; padding: 10px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Avalia√ß√£o de Professores</h1>
    <label for="professor">Escolha um professor:</label>
    <select id="professor">
        <option>Andr√©</option>
        <option>D√©bora</option>
        <option>V√≠tor</option>
        <option>Silv√¢nia</option>
        <option>Oliveira Santos</option>
        <option>Ribamar</option>
        <option>Kelma</option>
        <option>J√∫nior</option>
        <option>Lorenzo</option>
        <option>Onilma</option>
        <option>Izaias</option>
        <option>Alberes</option>
    </select>
    <br><br>
    <label><input type="checkbox" id="identificado"> Deseja ser identificado?</label>
    <br>
    <input type="text" id="nome" placeholder="Seu nome" style="display:none;">
    <br><br>
    <textarea id="comentario" rows="4" cols="50" placeholder="Escreva sua opini√£o..."></textarea>
    <br>
    <button onclick="adicionarComentario()">Enviar Coment√°rio</button>
    
    <h2>Coment√°rios:</h2>
    <div id="comments"></div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // üî• Configura√ß√£o do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyD675uBrd8UEsN1bIhHBKN1Htxbax2sT1Q",
            authDomain: "professores-b452a.firebaseapp.com",
            databaseURL: "https://professores-b452a-default-rtdb.firebaseio.com",
            projectId: "professores-b452a",
            storageBucket: "professores-b452a.firebasestorage.app",
            messagingSenderId: "929951612798",
            appId: "1:929951612798:web:759854c18b22d1eed8fd2f",
            measurementId: "G-BEV2N47QQQ"
        };

        // Inicializa o Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Exibir ou ocultar o campo de nome
        document.getElementById("identificado").addEventListener("change", function() {
            document.getElementById("nome").style.display = this.checked ? "block" : "none";
        });

        function adicionarComentario() {
            let professor = document.getElementById("professor").value;
            let identificado = document.getElementById("identificado").checked;
            let nome = identificado ? document.getElementById("nome").value : "An√¥nimo";
            let comentario = document.getElementById("comentario").value;

            if (comentario.trim() === "") {
                alert("Por favor, escreva um coment√°rio.");
                return;
            }

            // Salvar no Firebase
            const comentariosRef = ref(db, "comentarios/");
            push(comentariosRef, { professor, nome, comentario });

            document.getElementById("comentario").value = "";
            alert("Coment√°rio enviado!");
        }

        function carregarComentarios() {
            let commentsDiv = document.getElementById("comments");
            commentsDiv.innerHTML = "";

            // Buscar do Firebase
            const comentariosRef = ref(db, "comentarios/");
            onValue(comentariosRef, (snapshot) => {
                commentsDiv.innerHTML = "";
                snapshot.forEach((childSnapshot) => {
                    const c = childSnapshot.val();
                    let div = document.createElement("div");
                    div.className = "comment-box";
                    div.innerHTML = `<strong>${c.professor} - ${c.nome}</strong><br>${c.comentario}`;
                    commentsDiv.appendChild(div);
                });
            });
        }

        window.onload = carregarComentarios;
    </script>

</body>
</html>

